{"componentChunkName":"component---src-templates-blog-post-js","path":"/OpenCV/기초함수(2)/","result":{"data":{"site":{"siteMetadata":{"title":"DABI_devlog","author":"[DABIN SEO]","siteUrl":"https://Dabinnny.github.io","comment":{"disqusShortName":"","utterances":"Dabinnny/Dabinnny.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"a4c67c2f-3cd3-51ef-b9c4-b521436cf7a7","excerpt":"✏️ 이 글은 OpenCV의 기본 함수들에 대해서 정리합니다. (설치 및 환경구축은 별도 진행해주세요.) OpenCV에서는 웹카메라와 동영상으로 부터 frame을 받아오는 작업을 cv2.VideoCapture 클래스 하나로 처리합니다. 1. 웹카메라 또는 동영상 파일 불러오기 코드는 동영상 파일을 대상으로 합니다.  : 불러올 파일 이름(문자열), 웹카메라는 index번호 입력(보통은 0으로 지정)  : 선호하는 동영상 처리방법을 지정   : 성공 - True, 실패 - False…","html":"<p>✏️ 이 글은 OpenCV의 기본 함수들에 대해서 정리합니다. <em>(설치 및 환경구축은 별도 진행해주세요.)</em><br>\nOpenCV에서는 웹카메라와 동영상으로 부터 frame을 받아오는 작업을 cv2.VideoCapture 클래스 하나로 처리합니다.</p>\n<h2 id=\"1-웹카메라-또는-동영상-파일-불러오기\" style=\"position:relative;\"><a href=\"#1-%EC%9B%B9%EC%B9%B4%EB%A9%94%EB%9D%BC-%EB%98%90%EB%8A%94-%EB%8F%99%EC%98%81%EC%83%81-%ED%8C%8C%EC%9D%BC-%EB%B6%88%EB%9F%AC%EC%98%A4%EA%B8%B0\" aria-label=\"1 웹카메라 또는 동영상 파일 불러오기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 웹카메라 또는 동영상 파일 불러오기</h2>\n<ul>\n<li>코드는 동영상 파일을 대상으로 합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ cv2.VideoCapture(filename, apiPreference=None) </code></pre></div>\n<ul>\n<li><code class=\"language-text\">filename</code> : 불러올 파일 이름(문자열), <strong>웹카메라는 index번호 입력(보통은 0으로 지정)</strong></li>\n<li><code class=\"language-text\">apiPreference</code> : 선호하는 동영상 처리방법을 지정  </li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"># 동영상 파일 열기\n$ cv2.VideoCapture.open(filename, apiPreference=None) -&gt; retval</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"># 웹카메라 열기\n$ cv2.VideoCapture.isOpened() -&gt; retval</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"># 프레임 받아오기\n$ cv2.VideoCapture.read(image=None) -&gt; retval, image</code></pre></div>\n<ul>\n<li><code class=\"language-text\">retval</code>: 성공 - True, 실패 - False.  </li>\n<li><code class=\"language-text\">image</code>: 현재 프레임 (numpy.ndarray)</li>\n</ul>\n<h2 id=\"2-동영상-파일-저장하기\" style=\"position:relative;\"><a href=\"#2-%EB%8F%99%EC%98%81%EC%83%81-%ED%8C%8C%EC%9D%BC-%EC%A0%80%EC%9E%A5%ED%95%98%EA%B8%B0\" aria-label=\"2 동영상 파일 저장하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 동영상 파일 저장하기</h2>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ cv2.VideoWriter(filename, fourcc, fps, frameSize, isColor=None)</code></pre></div>\n<ul>\n<li><code class=\"language-text\">filename</code> : 저장할 파일 이름</li>\n<li><code class=\"language-text\">fourcc</code> : 영상의 코덱,압축방식,픽셀 포맷등을 정의하는 문자코드 <em>(보통 맥os:MJPG, 윈도우:DIVX)</em></li>\n<li><code class=\"language-text\">fps</code> : 초당 프레임 수</li>\n<li><code class=\"language-text\">frameSize</code> : 프레임 크기(tuple)</li>\n<li><code class=\"language-text\">isColor</code> : 컬러 - True(기본값), 흑백 - False</li>\n</ul>\n<h2 id=\"3-동영상-로드-예제\" style=\"position:relative;\"><a href=\"#3-%EB%8F%99%EC%98%81%EC%83%81-%EB%A1%9C%EB%93%9C-%EC%98%88%EC%A0%9C\" aria-label=\"3 동영상 로드 예제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 동영상 로드 예제</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> cv2\n\ncap <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>VideoCapture<span class=\"token punctuation\">(</span><span class=\"token string\">'./sample_video.mp4'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#0값이면 웹카메라 연결</span>\n\nwidth <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>cap<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>cv2<span class=\"token punctuation\">.</span>CAP_PROP_FRAME_WIDTH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 가로 길이 가져오기 </span>\nheight <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>cap<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>cv2<span class=\"token punctuation\">.</span>CAP_PROP_FRAME_HEIGHT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 세로 길이 가져오기</span>\n\nfourcc <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>VideoWriter_fourcc<span class=\"token punctuation\">(</span><span class=\"token string\">'M'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'J'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'P'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'G'</span><span class=\"token punctuation\">)</span>\nout <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>VideoWriter<span class=\"token punctuation\">(</span><span class=\"token string\">'output.avi'</span><span class=\"token punctuation\">,</span> fourcc<span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>cap<span class=\"token punctuation\">.</span>isOpened<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span>  <span class=\"token comment\">#while True:</span>\n    ret<span class=\"token punctuation\">,</span> frame <span class=\"token operator\">=</span> cap<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#ret에는 True, frame은 영상의 frame 저장</span>\n    <span class=\"token keyword\">if</span> ret <span class=\"token operator\">==</span> <span class=\"token boolean\">True</span> <span class=\"token punctuation\">:</span>\n        cv2<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span><span class=\"token string\">'frame'</span><span class=\"token punctuation\">,</span> frame<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> cv2<span class=\"token punctuation\">.</span>waitKey<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token builtin\">ord</span><span class=\"token punctuation\">(</span><span class=\"token string\">'q'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">break</span>\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Load failed!\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">break</span>\n\ncap<span class=\"token punctuation\">.</span>release<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#사용한 자원 해제</span>\ncv2<span class=\"token punctuation\">.</span>destroyAllWindows<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"OpenCV 기본함수 정리(2) - 동영상","date":"January 04, 2022"}}},"pageContext":{"slug":"/OpenCV/기초함수(2)/","previous":{"fields":{"slug":"/OpenCV/기초함수(1)/"},"frontmatter":{"title":"OpenCV 기본함수 정리(1) - 이미지"}},"next":{"fields":{"slug":"/OpenCV/산술연산/"},"frontmatter":{"title":"Image 데이터 산술연산"}}}},"staticQueryHashes":["3128451518","635777304"]}