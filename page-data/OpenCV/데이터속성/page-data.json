{"componentChunkName":"component---src-templates-blog-post-js","path":"/OpenCV/데이터속성/","result":{"data":{"site":{"siteMetadata":{"title":"DABI_devlog","author":"[DABIN SEO]","siteUrl":"https://Dabinnny.github.io","comment":{"disqusShortName":"","utterances":"Dabinnny/Dabinnny.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"c5abf2f2-d65e-581c-9c55-73bc1ab4457c","excerpt":"✂️ 이미지를 자르고 붙여보자! 1. 이미지 데이터 속성 확인해보기 OpenCV는 이미지 데이터를 numpy.ndarray로 표현한다. 세부 속성들을 예제를 통해 확인해보자. 각각 그레이스케일 이미지와 컬러 이미지를 불러왔다고 해보자. 확인할 수 있는것은 shape의 형태가 다르다. 컬러이미지는 로 채널값이 추가된다. 데이터 타입은 Numpy 자료형으로 표현되며 로 같은데, Opencv…","html":"<h1 id=\"️-이미지를-자르고-붙여보자\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A5%BC-%EC%9E%90%EB%A5%B4%EA%B3%A0-%EB%B6%99%EC%97%AC%EB%B3%B4%EC%9E%90\" aria-label=\"️ 이미지를 자르고 붙여보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✂️ 이미지를 자르고 붙여보자!</h1>\n<h2 id=\"1-이미지-데이터-속성-확인해보기\" style=\"position:relative;\"><a href=\"#1-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%86%8D%EC%84%B1-%ED%99%95%EC%9D%B8%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"1 이미지 데이터 속성 확인해보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 이미지 데이터 속성 확인해보기</h2>\n<br/>\n<p>OpenCV는 이미지 데이터를 numpy.ndarray로 표현한다. 세부 속성들을 예제를 통해 확인해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">img1 <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'cat.bmp'</span><span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>IMREAD_GRAYSCALE<span class=\"token punctuation\">)</span> \nimg2 <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'cat.bmp'</span><span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>IMREAD_COLOR<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'type(img1):'</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>img1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># type(img1): &lt;class 'numpy.ndarray'> </span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img1.shape:'</span><span class=\"token punctuation\">,</span> img1<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span> <span class=\"token comment\"># img1.shape: (480, 640) </span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img2.shape:'</span><span class=\"token punctuation\">,</span> img2<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span> <span class=\"token comment\"># img2.shape: (480, 640, 3) </span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img1.dtype:'</span><span class=\"token punctuation\">,</span> img1<span class=\"token punctuation\">.</span>dtype<span class=\"token punctuation\">)</span> <span class=\"token comment\"># img1.dtype: uint8</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img2.dtype:'</span><span class=\"token punctuation\">,</span> img2<span class=\"token punctuation\">.</span>dtype<span class=\"token punctuation\">)</span> <span class=\"token comment\"># img2.dtype: uint8</span></code></pre></div>\n<ul>\n<li>각각 그레이스케일 이미지와 컬러 이미지를 불러왔다고 해보자.</li>\n<li>확인할 수 있는것은 shape의 형태가 다르다. 컬러이미지는 <code class=\"language-text\">(h, w, 3)형태</code>로 채널값이 추가된다.</li>\n<li>데이터 타입은 Numpy 자료형으로 표현되며 <code class=\"language-text\">uint8</code>로 같은데, Opencv 자료형으로 나타날땐 그레이스케일 이미지는 <code class=\"language-text\">cv2.CV_8UC1</code>, 컬러 이미지는 <code class=\"language-text\">cv2.CV_8UC3</code>로 나타낼 수 있다.   </li>\n</ul>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">img1 <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'cat.bmp'</span><span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>IMREAD_GRAYSCALE<span class=\"token punctuation\">)</span> \nimg2 <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'cat.bmp'</span><span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>IMREAD_COLOR<span class=\"token punctuation\">)</span>\n\nh<span class=\"token punctuation\">,</span> w <span class=\"token operator\">=</span> img2<span class=\"token punctuation\">.</span>shape \n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img2 size: {} x {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># -> 에러발생, 그레이스케일 이미지는 채널값이 없기 때문</span>\n\nh<span class=\"token punctuation\">,</span> w <span class=\"token operator\">=</span> img2<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>  \n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img2 size: {} x {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># img2 size : 640 X 480</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>img1<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span>   <span class=\"token comment\"># img.ndim == 2: </span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img1 is a grayscale image'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">elif</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>img1<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">:</span> \n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img1 is a truecolor image'</span><span class=\"token punctuation\">)</span>\n </code></pre></div>\n<ul>\n<li>이미지 타입별 속성만으로 그레이스케일 이미지인지 컬러 이미지인지 확인이 가능하다.  </li>\n<li>그레이스케일의 <code class=\"language-text\">shape</code>을 확인할때는 <code class=\"language-text\">h, w</code> 값까지만 범위를 지정해주어야 error가 안난다.  </li>\n<li><code class=\"language-text\">ndim</code>은 차원수로 <code class=\"language-text\">len(img1.shape)</code> 와 같다.<br>\n<br/></li>\n</ul>\n<h2 id=\"2-이미지-생성-복사-부분영역-추출하기\" style=\"position:relative;\"><a href=\"#2-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%83%9D%EC%84%B1-%EB%B3%B5%EC%82%AC-%EB%B6%80%EB%B6%84%EC%98%81%EC%97%AD-%EC%B6%94%EC%B6%9C%ED%95%98%EA%B8%B0\" aria-label=\"2 이미지 생성 복사 부분영역 추출하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 이미지 생성, 복사, 부분영역 추출하기</h2>\n<p>(1) 이미지를 불러오는게 아니라 생성해보자. </p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">img1 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>empty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">480</span><span class=\"token punctuation\">,</span> <span class=\"token number\">640</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>uint8<span class=\"token punctuation\">)</span> <span class=\"token comment\"># grayscale image </span>\nimg2 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">480</span><span class=\"token punctuation\">,</span> <span class=\"token number\">640</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>uint8<span class=\"token punctuation\">)</span> <span class=\"token comment\"># color image</span>\nimg3 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>ones<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">480</span><span class=\"token punctuation\">,</span> <span class=\"token number\">640</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>uint8<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">255</span> <span class=\"token comment\"># white</span>\nimg4 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>full<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">480</span><span class=\"token punctuation\">,</span> <span class=\"token number\">640</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>uint8<span class=\"token punctuation\">)</span> <span class=\"token comment\"># yellow</span></code></pre></div>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 760px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 21.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAA40lEQVQY02XMMYqDQBiG4UEP4DUWYbEMyDY2Fim8g6iI2ngBbSy18Dq6K9u6jWJj4y10iAYcv0yGJAR24OMd/uIhaZrC8zyEYQjXdVEUBVRVBSHkNcMw8HzHwUS37YLr+sEPBMdORK/rF0iWZYiiCHEcw/d9lGUJTdMEJMuyqGmaHDr+gdv6+QBlgN1BAyRJEjiOgyAIYNs28jyHruuQJAmKogjQsiwB3sfY/gaeOCSB7coDPIOM44i+7zEMg+g0TWjbFnVdo2kaVFWFrutAKcU8z69RumBZ/vj/B8v8y/vNbx1uZT/nAC4tpzcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"make\" title=\"make\" src=\"/static/a478a119aaed651cd36a1e92553a977a/3c051/make.png\" srcset=\"/static/a478a119aaed651cd36a1e92553a977a/5a46d/make.png 300w,\n/static/a478a119aaed651cd36a1e92553a977a/0a47e/make.png 600w,\n/static/a478a119aaed651cd36a1e92553a977a/3c051/make.png 760w\" sizes=\"(max-width: 760px) 100vw, 760px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<ul>\n<li><code class=\"language-text\">numpy.empty()</code> 함수는 임의의 값으로 초기화된 배열을 생성</li>\n<li><code class=\"language-text\">numpy.zeros()</code> 함수는 0으로 초기화된 배열을 생성</li>\n<li><code class=\"language-text\">numpy.ones()</code> 함수는 1로 초기화된 배열을 생성</li>\n<li><code class=\"language-text\">numpy.full()</code> 함수는 fill_value로 초기화된 배열을 생성<br>\n<br/>\n<br/></li>\n</ul>\n<p>(2) 이미지를 복사해보고 부분영역을 추출해보자.  </p>\n<ul>\n<li>이 경우 img2와 img3은 똑같이 img1을 복사한것처럼 보이지만, img2의 경우 원본이미지가 바뀔때 영향을 받는다. </li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">img1 <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'HappyFish.jpg'</span><span class=\"token punctuation\">)</span> \n \nimg2 <span class=\"token operator\">=</span> img1\nimg3 <span class=\"token operator\">=</span> img1<span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \n\nimg1<span class=\"token punctuation\">.</span>fill<span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span></code></pre></div>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 791px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 29.000000000000004%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABEklEQVQY022Qv0vDQBzF8weIaxdHF/8R/xlHcXJzFhHpquDQRUQH0clFEBxFEKG2g9EY2/w80+QSjJeP+ba2ltjv8eDu3r13j2cppSiKAq01o9GINE3JsowgDInjeMYlv5zsh96QyPcovw2UkKgEnesxrKqqmIeMiMTUmL97Y8yYy+sP3H6PrDBEnwMun85I6/X+bOPYb1jyaGo0byjJFnF5nuO/vjC4OMQ+WGP3ZJlOe5+79imqTj4zbCYU4X+uovgqiV2bj41VuGlxe7zE1so6V5t7lFpNDJszn7A5uZ50VUYOvf4One0W7v0jD+fXON0+lgglzRRylvIFizjpNkkUZV1pkGi6R22KwMMPY7yhxw/iRMHDBG8f4wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"img1\" title=\"img1\" src=\"/static/193480f50fa6b96bd79ccde84c12bdf2/cc8d6/img1.png\" srcset=\"/static/193480f50fa6b96bd79ccde84c12bdf2/5a46d/img1.png 300w,\n/static/193480f50fa6b96bd79ccde84c12bdf2/0a47e/img1.png 600w,\n/static/193480f50fa6b96bd79ccde84c12bdf2/cc8d6/img1.png 791w\" sizes=\"(max-width: 791px) 100vw, 791px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span> \n<br/>\n<br/>\n<br/>\n<ul>\n<li>또한 img2의 값이 바뀌어도 원본이미지에 영향을 미친다.</li>\n<li>따라서, 원본이미지와 영향이 없는 깊은복사를 해야할때는 <code class=\"language-text\">.copy()</code>를 활용한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"> \nimg1 <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'HappyFish.jpg'</span><span class=\"token punctuation\">)</span>\n\nimg2 <span class=\"token operator\">=</span> img1<span class=\"token punctuation\">[</span><span class=\"token number\">40</span><span class=\"token punctuation\">:</span><span class=\"token number\">120</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">:</span><span class=\"token number\">150</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># numpy.ndarray의 슬라이싱</span>\nimg3 <span class=\"token operator\">=</span> img1<span class=\"token punctuation\">[</span><span class=\"token number\">40</span><span class=\"token punctuation\">:</span><span class=\"token number\">120</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">:</span><span class=\"token number\">150</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \n\nimg2<span class=\"token punctuation\">.</span>fill<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 550px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 43.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAB/ElEQVQoz42SP2gTYRjGz0VFK+Isgg4qHZWAqTgFJ3Fx6qSQTVArSDIVg2jARVvQql3sYYdUl0YbLBRTKnHRprVx0sZKYzClNcnF5HK5//fzu0tAxA6+8N3LPffc873f9zzSz2oVVVXRdZ221kYLlkar1Qpw0zTZrrztMM9D2iyXsQz9D+oihFpYlkHH0FAUBddxMAwjEPe7I94Dquvi2Ba2LTC3i0lr+UXWiquU1teZzk0xMptE0ep02gZzz2aoVH74e/xTSuMXbbWJIT56PsHsTXg5GkWSJPb17Qn6sdBe3kyPs7FaZv72w+Bwj5+ME4vFSCQSxOJxMpkMum3zXdHYWkgx9+EWC9Vcd8KLg4OBkCTtCPrJ/v0kT4QZ7r/GytPJgHR6YKDH6a6r12/gbH7l8/0olWSIL+mdTK3c7Ao+GntA6FAfFyIHiER2c/7gLkaPn+V5XGbp3mhACp8K/yV4JT5M/fUYyjkJZTKE+u0I+bdDXUH/YW0VaZRlXs4e5sWdo1QKRZrijtJDd4URHbLZeWRZJpVKIU9MsFz4hFEt08jPoNfe026+YqO03BX0PDuIgB+ObHqEwqUzWHpHuGzx8d2SMKvE/5Yn3JE6HQ2t7edQw1R1arlFmvUahiliIuLg59OPib+BLYzwu+O4wc+eI4bxHPyh3F5sfgN4cFMQ+G19lQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"img2\" title=\"img2\" src=\"/static/96b0fd0ca466702424a96f1562ca0d1e/dd45a/img2.png\" srcset=\"/static/96b0fd0ca466702424a96f1562ca0d1e/5a46d/img2.png 300w,\n/static/96b0fd0ca466702424a96f1562ca0d1e/dd45a/img2.png 550w\" sizes=\"(max-width: 550px) 100vw, 550px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<br/>\n<h2 id=\"3-마스크연산을-사용해서-두개의-이미지를-합쳐보자\" style=\"position:relative;\"><a href=\"#3-%EB%A7%88%EC%8A%A4%ED%81%AC%EC%97%B0%EC%82%B0%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%EB%91%90%EA%B0%9C%EC%9D%98-%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A5%BC-%ED%95%A9%EC%B3%90%EB%B3%B4%EC%9E%90\" aria-label=\"3 마스크연산을 사용해서 두개의 이미지를 합쳐보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 마스크연산을 사용해서 두개의 이미지를 합쳐보자.</h2>\n<ul>\n<li>이미지를 합치는 연산은 add 함수를 사용해도 된다.</li>\n<li>여기서 사용되는 <code class=\"language-text\">.copyTo()</code> 함수는 정확히는 이미지를 합친다기보다는 이미지의 픽셀값을 복사해서 새로운 이미지에 적용해주는 개념이다. </li>\n<li>이때는 산술연산이 아닌 ROI연산(관심영역)을 지원하며, 이때는 마스크 이미지가 인자로 들어간다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">src <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'./img/tower.jpg'</span><span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>IMREAD_COLOR<span class=\"token punctuation\">)</span>\nlogo <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'./moon.png'</span><span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>IMREAD_UNCHANGED<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> src <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span> <span class=\"token keyword\">or</span> logo <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Image load failed!'</span><span class=\"token punctuation\">)</span>\n    sys<span class=\"token punctuation\">.</span>exit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># mask는 알파 채널로 만든 마스크 영상, 그레이스케일이어야 하므로 마지막 값만 가져와서 1차원으로 변환</span>\nmask <span class=\"token operator\">=</span> logo<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># logo는 b, g, r 3채널로 구성된 컬러 이미지로 4채널이므로 -1지정    </span>\nlogo <span class=\"token operator\">=</span> logo<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  \nh<span class=\"token punctuation\">,</span> w <span class=\"token operator\">=</span> mask<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># src와 dst의 크기가 같아야 마스크 연산이 되기때문에 src크기와 동일하게 추출(좌표는 임의로 지정가능)</span>\ncrop <span class=\"token operator\">=</span> src<span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token operator\">+</span>h<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token operator\">+</span>w<span class=\"token punctuation\">]</span>  \n\ncv2<span class=\"token punctuation\">.</span>copyTo<span class=\"token punctuation\">(</span>logo<span class=\"token punctuation\">,</span> mask<span class=\"token punctuation\">,</span> crop<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#crop[mask > 0] = logo[mask > 0]  </span>\n\ncv2<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span><span class=\"token string\">'src'</span><span class=\"token punctuation\">,</span> src<span class=\"token punctuation\">)</span>\ncv2<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span><span class=\"token string\">'logo'</span><span class=\"token punctuation\">,</span> logo<span class=\"token punctuation\">)</span>\ncv2<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span><span class=\"token string\">'mask'</span><span class=\"token punctuation\">,</span> mask<span class=\"token punctuation\">)</span>\ncv2<span class=\"token punctuation\">.</span>waitKey<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ncv2<span class=\"token punctuation\">.</span>destroyAllWindows<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 59.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACR0lEQVQoz52T3UuTURzHn9v+gd16GWTXWUl5oSRoRJKhZOSwDCqvNILwRlF7j8hCENKkDIMCh+njNgMJX8bai60lvaw2YTC3ppt7cW/Pnn169phLK4T6wZdzOOf8Pvx+/L5HyGUzyOkomVUbUsTF75HL5f5JgqwAc7KsAO2sOW4jp0IkUxKrKyukUqltUGWHrLzNK5tXdquyG8CspACVt5m1T6zar5OJelVILBZVFCsAKUB3DkGWlCrkJLmVOSKeycJFOp0mHo+r+82q8vHB5eabe5EZ+yJGsxOD2YE4v8D4rIVgaA3B5/Oh1TYyO/OGkecvmBBFNTGRSJBMJv+o4GLPIDfutNPb14Gm+ipFNW1oqi6x63ADr986EMxmM4IgUFdXTyAQwGKxqInRaBSv14vb7cbj8ShaIhjw8WBgiuFHvQw97qe66R5VzTcpabpLcX07s+8+IphMJhVYW3sSf+A7NptNBQaDQfx+P5FIhHA4rGo9sY7uqY6X94cZ6Zumo/UWLa29nLkyyJHmbiyLXxH8y8ucb9LyfsGKOKbDaNCrwHy7f2u5reUC+/cUc/b4CU6XH6KmooJ9B8oo2r2XmTmlOJfXT+fAGF1DE5y71s+888tPYKowlPx0N4disy/wShxnXC9imDKgN04qEjEa9WpXgtW5RFnjQ0obutFUXubJpElNDIXC24Bb1x1t4/nsob/nGV2tXdRqO5mYthaGkjfrdmOjnkmStLFmpV9SzlRj26wWjlWWc6rmKKUHSxjVjRa89z9f7wfNU0Xoty9uvQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"fi\" title=\"fi\" src=\"/static/786bb6c3cfa5e08e686ff6c3d0df2a37/c1b63/fi.png\" srcset=\"/static/786bb6c3cfa5e08e686ff6c3d0df2a37/5a46d/fi.png 300w,\n/static/786bb6c3cfa5e08e686ff6c3d0df2a37/0a47e/fi.png 600w,\n/static/786bb6c3cfa5e08e686ff6c3d0df2a37/c1b63/fi.png 1200w,\n/static/786bb6c3cfa5e08e686ff6c3d0df2a37/d61c2/fi.png 1800w,\n/static/786bb6c3cfa5e08e686ff6c3d0df2a37/460fa/fi.png 1910w\" sizes=\"(max-width: 1200px) 100vw, 1200px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<br/>\n<br/>\n<br/>\n<blockquote>\n<p><em>이 포스팅은 황선규 교수님의 컴퓨터비전과 딥러닝 강의를 참고하였습니다.</em></p>\n</blockquote>","frontmatter":{"title":"Image 속성값, 생성, 복사, 부분추출, 합치기","date":"January 08, 2022"}}},"pageContext":{"slug":"/OpenCV/데이터속성/","previous":{"fields":{"slug":"/OpenCV/산술연산/"},"frontmatter":{"title":"Image 데이터 산술연산"}},"next":{"fields":{"slug":"/DataStructure/정렬/"},"frontmatter":{"title":"정렬알고리즘 구현(Bubble, Selection, Insertion, Merge, Quick)"}}}},"staticQueryHashes":["3128451518","635777304"]}